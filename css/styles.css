:root{
  --bg:#0f0f12; --card:#16171c; --ink:#f5f6f8; --muted:#a8adb7;
  --accent:#9ae6b4; --accent2:#7cc7ff; --brand:#d8b4fe; --line:#242736;
  --ok:#9ae6b4; --warn:#ffd66e; --radius:16px;
}
*{box-sizing:border-box; -webkit-tap-highlight-color:transparent}
html,body{height:100%}
body{
  margin:0; font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Sans","Noto Sans JP",sans-serif; color:var(--ink);
  background:radial-gradient(1200px 800px at 70% -10%,#243042 0%, transparent 55%), var(--bg);
  -webkit-text-size-adjust:100%; touch-action:manipulation;
}
.wrap{max-width:680px; margin:0 auto; padding:18px 16px 24px;}

header{display:flex; align-items:center; gap:12px; padding:12px 0 6px;}
.logo{width:44px; height:44px; border-radius:12px; background:
  conic-gradient(from 180deg, var(--accent) 0 30%, var(--brand) 30% 60%, var(--accent2) 60% 100%);
  display:grid; place-items:center; color:#0a0b0d; font-weight:800;}
h1{font-size:1.25rem; margin:0}
.sub{color:var(--muted); font-size:.92rem; margin-top:2px}

.card{background:linear-gradient(180deg, #191b22, #12141a); border:1px solid var(--line); border-radius:var(--radius); padding:16px; box-shadow:0 10px 30px rgba(0,0,0,.25);}
.card + .card{margin-top:14px}
.row{display:flex; gap:10px; flex-wrap:wrap}

label, .chip, button, .btn{border-radius:12px}
input[type="text"]{
  width:100%; padding:12px 14px; border-radius:12px; border:1px solid #2b3040;
  background:#0e1016; color:var(--ink); outline:none;
}
.hint{color:var(--muted); font-size:.9rem; margin-top:6px}
.chip{padding:10px 12px; background:#0e1016; border:1px solid #2b3040; cursor:pointer; user-select:none}
.chip.active{border-color:var(--accent2); background:linear-gradient(180deg, #11141c, #0b0d12); box-shadow:inset 0 0 0 1px rgba(124,199,255,.2)}
.actions{display:flex; gap:10px; margin-top:12px}
button{padding:12px 16px; border:none; background:var(--accent2); color:#08111a; font-weight:700; cursor:pointer}
button.ghost{background:#0e1016; color:#f5f6f8; border:1px solid #2b3040}
.btn{display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:12px 16px; font-weight:700; text-decoration:none}
.btn.primary{background:linear-gradient(90deg, var(--accent2), var(--brand)); color:#08111a; border:none}
.btn.ghost{background:#0e1016; color:#f5f6f8; border:1px solid #2b3040}

.progress{height:8px; background:#1b1e29; border-radius:999px; overflow:hidden; margin:10px 0 14px}
.bar{height:100%; width:0%; background:linear-gradient(90deg, var(--accent2), var(--brand)); transition:width .35s ease}
.q-title{font-size:1.05rem; margin:0 0 8px}
.opt{padding:12px; border:1px solid #2b3040; border-radius:12px; background:#0e1016; cursor:pointer}
.opt:hover{border-color:#3a4056}
.opt.active{border-color:var(--brand); box-shadow:inset 0 0 0 1px rgba(216,180,254,.25)}
.kicker{letter-spacing:.08em; color:var(--muted); font-size:.8rem; text-transform:uppercase}
.divider{height:1px; background:var(--line); margin:10px 0}
.section-title{font-weight:700; margin:4px 0 6px; font-size:.98rem}
.summary{color:var(--ink); background:#0f1218; border:1px dashed #2b3040; padding:10px 12px; border-radius:12px; line-height:1.5}

.wine-card{border:1px solid #2b3040; border-radius:14px; padding:12px; background:linear-gradient(180deg, #12141a, #0b0d12)}
.wine-head{display:flex; align-items:center; gap:10px; margin-bottom:6px}
.flag{font-size:1.15rem}
.muted{color:var(--muted)} .sm{font-size:.92rem}
.pill{display:inline-flex; padding:6px 10px; border:1px solid #2b3040; border-radius:999px; gap:6px; align-items:center}
.footer-note{color:var(--muted); font-size:.85rem; margin-top:12px}
.center{display:grid; place-items:center}
.fade{animation:fade .25s ease}
@keyframes fade{from{opacity:0; transform:translateY(4px)} to{opacity:1; transform:none}}
.hidden{display:none !important}

@media (max-width: 480px) {
  .result-bar-actions { flex-direction: column; }
  .btn.big { width: 100%; }
}

/* ---- Score Footer ---- */
.score-footer{
  position:fixed; left:0; right:0; bottom:0;
  background:linear-gradient(180deg, rgba(15,16,24,.6), rgba(10,11,17,.95));
  backdrop-filter: blur(8px);
  border-top:1px solid var(--line);
  padding:8px 10px 10px;
  z-index:50;
}
.score-grid{display:grid; grid-template-columns: repeat(6, 1fr); gap:8px}
.score-item{display:flex; flex-direction:column; gap:4px; align-items:stretch}
.score-label{font-size:.72rem; color:var(--muted); text-align:center}
.score-bar{height:8px; border-radius:6px; background:#1b2130; overflow:hidden}
.score-fill{height:100%; width:0%; background:linear-gradient(90deg, var(--accent2), var(--brand)); transition:width .25s ease}
.score-num{font-size:.72rem; color:var(--muted); text-align:center}
.score-title{display:flex; justify-content:space-between; align-items:center; margin:0 0 6px}
.score-title b{font-size:.82rem}
.score-help{font-size:.72rem}

/* ---- 結果ヒーロー ---- */
.result-hero{
  border:1px solid var(--line); border-radius:14px; padding:14px;
  background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(0,0,0,0.08));
  margin-bottom:10px;
}
.result-hero-tag{font-weight:800; letter-spacing:.06em; font-size:.9rem}
.result-hero-sub { word-break: break-word; line-height: 1.5; }

/* ---- 結果アクションブロック（インライン） ---- */
.result-bar{
  position:static; /* ← 固定解除 */
  background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(0,0,0,0.08));
  border:1px solid var(--line);
  border-radius:14px;
  padding:14px;
  margin:12px 0 14px; /* コンテンツ間に余白 */
  display:grid; gap:10px;
}
.result-bar-head{display:flex; align-items:center; gap:10px}
.result-bar-head .emoji{font-size:1.25rem; line-height:1}
.result-bar-head .title{font-size:1.05rem}
.result-bar-head .badge{
  font-size:.78rem; padding:4px 8px; border-radius:999px;
  border:1px solid var(--accent2); color:var(--accent2);
}
.result-note{
  margin: 4px 0 0;
  color: var(--ink);
  font-size: .95rem;
}
.result-steps{margin:0; padding-left:20px; color:var(--ink)}
.result-steps li{margin:.2rem 0; line-height:1.5}
.result-bar-actions{display:flex; gap:10px}
.btn.big{font-size:1rem; padding:14px 18px}

/* 見落とし防止アニメ（任意） */
@keyframes pulse-glow{
  0%{box-shadow:0 0 0 0 rgba(124,199,255,.45)}
  70%{box-shadow:0 0 0 14px rgba(124,199,255,0)}
  100%{box-shadow:0 0 0 0 rgba(124,199,255,0)}
}
@keyframes nudge{
  0%,100%{transform:translateY(0)}
  30%{transform:translateY(-3px)}
  60%{transform:translateY(0)}
}
.result-bar.highlight{
  border-color:var(--brand);
  animation:pulse-glow 2s ease-out 0s 3;
}
.result-bar.highlight .emoji{animation:nudge .9s ease 0s 3}

/* プロフィールを3分割（スクロール回避） */
.profile-step{display:grid; gap:10px}
